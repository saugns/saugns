mgensys is the Music GENeration SYStem; it reads script files or strings,
and can output to system audio and/or a 16-bit PCM WAV file.

(This is an experimental redesign of the saugns program. The saugns program
is the more mature and stable version. This program reworks the design from
a much earlier starting point; if it becomes better, it will become the new
saugns program.)

The program as a whole is licensed under LGPL-3.0+, see COPYING for details.
Various smaller files are permissively licensed, see their heading comments.

Script syntax:

Whitespace is not allowed within names that come after the initial letter of
an operation, such as sin, tri. Nor is it allowed within numbers. Apart from
this, spaces and tabs may be freely placed, or - not recommended - omitted.

Newlines terminate steps, though a new step will also terminate the previous
one allowing multiple steps on one line.

< and > allow nesting of scope; the step prior to the < remains in scope
until new steps are given, and a newline or a > will return to the step for
which the < was given.

Parameters with nesting use { and } instead, differentiating the two, though
such nesting also allows newlines.

When a number is given for a parameter, specifying it within parentheses will
make the syntax freer, allowing mathematical operations and further nesting of
parentheses. Whitespace including newlines may be freely placed until the
final closing parenthesis.

* Operations consist of a name followed by optional arguments for parameters.
* Arguments are given for an operation.
* Operators affect operations much like arguments, but may be more freely
  placed and do not belong to the present operation.

Operations will output audio at the same time unless time shifts/delays are
involved. Each delaying will delay (shift the time of) all future operations.

The following operations are supported:

S:
	Set default value or other global option in the script.
	a	Amplitude multiplier for all waves. Starts at 1.0.
	f	Default frequency in Hz. Starts at 100.0.
	r	Default frequency ratio. Starts at 1.0.
	t	Default time duration in seconds. Starts at 1.0.

Wsin, Wsqr, W...:
	Play wave; see "Wave types" for all types.
	The supported parameters are...
	t	Time duration in seconds.
	f	Frequency in Hz.
	f!{}	Second frequency in Hz to modulate (FM) to by wave or envelope,
		and/or a list of modulators given within {} following the
		number if given.
	r	Frequency ratio (modulator waves only) of carrier to modulator.
		Keeps frequency that of that of the carrier divided by the
		given. Often used in the form r(n/m) to give an n:m ratio.
	r!{}	Second frequency ratio (modulator waves only) to modulate (FM)
		to by wave or envelope, and/or a list of modulators given
		within {} following the number if given.
	a	Amplitude, where 1.0 gives a level of 0dB, which is the signal
		max of the output. For a modulator wave, this however simply
		adjusts the effect strength.
	a!{}	Second amplitude to modulate (AM) to by wave or envelope,
		and/or a list of modulators given within {} following the
		number if given.
	p	Set the beginning phase of the wave. For example, p(3/4) will
		make a sine or triangle wave begin at its "bottom". This is
		mostly used where wanted for waves used by f!/r! or a!.
	p!{}	A list of modulator (PM) waves is given within the {}, the
		per-sample sum of which is used to phase-modulate the carrier,
		be it the final carrier or in turn another modulator.
	w	Change wave; see "Wave types" for all types.
	\	Time shift/delay current operation and following ones, time
		in seconds.

Wave types:
	sin	Sine.
			For cosine, use (1/4) phase.
	sqr	Square (anti-aliased cycle).
			Lacks full "bite" at low frequencies.
	tri	Triangle (naive).
	saw	Saw (anti-aliased cycle).
			Lacks full "bite" at low frequencies.
			Decreasing slope; use negative amplitude
			or frequency for increasing slope.
	sha	Half-frequency absolute sine (adjusted).
			Frequency halved to restore base frequency,
			peak amplitude centered and doubled, phase
			shifted to begin and end at zero amplitude.
			A softer alternative to "saw" (saw wave).
	szh	Half-zero'd sine (adjusted).
			Positive half kept, negative half zero'd,
			peak amplitude centered and doubled, phase
			shifted to begin and end at zero amplitude.
			A warm and full sound.
	ssr	Square root of sine.
			Mirrored for the negative half.
			A softer alternative to "sqr" (square wave).

Channel mixing:
	Letters C, L, and R change the channel for succeeding waves.

The following operators are supported:

/:	Time shift/delay next operation and following ones, time in seconds.
	Alternatively, /t will delay by the time of the previous operation.
|:	Add (independently of /) enough time shift/delay for the next operation
	to begin at the end of all that preceeds it, though / and \ may
	further delay it.

Any W operation may be prefixed by "'label " in order to define a label for
it, where the label is alphanumeric (and/or '_'); thereafter the label may
be referenced as ":label", allowing future changes to an operation
previously defined. For practical purposes, label referencing can be
considered an operation, behaving the same.
